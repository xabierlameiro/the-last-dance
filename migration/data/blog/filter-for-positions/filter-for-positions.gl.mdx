---
title: 'Filtro para posici√≥ns, enquisa para comprobar compatibilidade'
slug: 'filtro-para-posicions'
author: 'Xabier Lameiro'
category: 'React'
tags: ['node']
locale: 'gl'
excerpt: 'Enquisa para que os recruiters poidan saber se son compatible cunha posici√≥n de traballo concreta'
description: 'Enquisa para que os recruiters poidan saber se son compatible cunha posici√≥n de traballo concreta'
image: '/posts/filter-for-positions.png'
alternate: [{ lang: 'en', url: 'filter-for-positions' }, { lang: 'es', url: 'filtro-para-posiciones' }]
---

# Filtro para posici√≥ns, enquisa para comprobar compatibilidade

<Date date="03-07-2023" />

<GoogleAdsense slot="6618374506" horizontal />

## Motivaci√≥n

A√≠nda que pareza mentira, debido √° alta demanda de desarrolladores de todo tipo no mercado por parte das empresas, moitos recruiters e headhunters volv√©ronse m√°quinas do copy paste. Non sei a cifra ou a cantidade diaria de mensaxes que env√≠an a todos os perf√≠s da s√∫a rede que fan "match" coa posici√≥n nova que te√±en dispo√±ible, pero apostar√≠a que non son poucos. E non √© que non me guste que me env√≠en mensaxes, pero gustar√≠ame que me enviasen mensaxes que realmente me interesen e que me fagan pensar que viron o meu perfil, o meu c√≥digo ou alg√∫n dos meus traballos e que realmente me queren contratar polas mi√±as habilidades.

Non adoita ser as√≠, moitos usan programas para automatizar o proceso de procura de perf√≠s como [Hiretual](https://hiretual.com/ 'Hiretual') ou [Jobvite](https://www.jobvite.com/ 'Jobvite'), env√≠an mensaxes a todos os usuarios "que fan match" e en ocasi√≥ns isto non funciona moi ben. Xa que no teu perfil pon claramente desarrollador Frontend, a t√∫a experiencia di o mesmo... pero, eles te√±en unha posici√≥n Xava con microservicios incrible para ti.

Outras veces m√©tese a pata e env√≠anche unha mensaxe co nome do teu compa√±eiro de equipo:

<Image src="/coincidence.png" alt="Coincidencia" width="1024" height="726" style={{width: '100%', height: 'auto'}} />

## A idea

Cantas veces tiveches unha chamada con preguntas como:

-   Por que buscas un cambio ?
-   Co√±eces os principios SOLID ?
-   Cuantos anos dir√≠as que has traballo con React ? E Typescript ?
-   Sabes o que √© a integraci√≥n continua ?

> Para que despois ofr√©zanche un salario inferior ao que tes, ou que che pidan o CV para non volver dicirche nunca nada.

How many times bro ?

**_A idea √© filtrar ti antes que che filtren a ti._**

## Soluci√≥n

10 simples preguntas sobre puntos que consideres importantes, requisitos, valores.. ou basicamente o que che de a gana e se se cumpren, o recruiter obter√° informaci√≥n de contacto para poder entrar en detalle de todo o proceso.

√â un win win, ambos aforramos tempo, non ?

## C√≥digo

Cunha compo√±ente contedora ou p√°xina, un par de bot√≥ns, radiobuttons e un array de objectos tes m√°is que suficiente, no meu caso:

Te√±o a mi√±a p√°xina:

```tsx survey.tsx v1
import Dialog from '@/components/Dialog';
import styles from '@/styles/survey.module.css';
import ControlButtons from '@/components/ControlButtons';
import Confetti from 'react-confetti';
import SEO from '@/components/SEO';
import useWindowResize from '@/hooks/useWindowResize';
import useSurvey from '@/hooks/useSurvey';
import NavigationArrows from '@/components/NavigationArrows';
import QuestionBlock from '@/components/QuestionBlock';

const Survey = () => {
    const { width, height } = useWindowResize();
    const {
        questions,
        answers,
        surveySuccess,
        totalQuestions,
        currentQuestionNum,
        questionsDoneNum,
        handleNextQuestion,
        handlePreviousQuestion,
        handleAnswerOptionClick,
    } = useSurvey();

    return (
        <>
            <Confetti width={width} height={height} numberOfPieces={100} run={surveySuccess} />
            <SEO
                noimage={false}
                meta={{
                    title: 'Averigua si hago match con la posici√≥n en 1 minuto',
                    description: 'Click para continuar',
                    noindex: true,
                }}
            />
            <Dialog
                open
                modalMode
                withPadding
                header={
                    <div className={styles.header}>
                        <ControlButtons />
                        <span>
                            {currentQuestionNum > 0 && currentQuestionNum < 11 && (
                                <span>
                                    {currentQuestionNum} / {totalQuestions - 2}
                                </span>
                            )}
                        </span>
                    </div>
                }
                body={
                    <div className={styles.container}>
                        {questions.map((question: any, index: number) => (
                            <QuestionBlock
                                key={index}
                                question={question}
                                index={index}
                                currentQuestionNum={currentQuestionNum}
                                answers={answers}
                                handleAnswerOptionClick={handleAnswerOptionClick}
                            />
                        ))}
                    </div>
                }
                footer={
                    <div className={styles.buttons}>
                        <NavigationArrows
                            hidden={currentQuestionNum < 1 || currentQuestionNum > 10}
                            disabledLeft={currentQuestionNum < 2}
                            disabledRight={questionsDoneNum < currentQuestionNum}
                            onClickLeft={handlePreviousQuestion}
                            onClickRight={handleNextQuestion}
                        />
                    </div>
                }
            />
        </>
    );
};

export default Survey;
```

Meu hook con loxica de negocio:

```ts useSurvey.ts v1
import { useRouter } from 'next/router';
import { useReducer, useEffect, useRef } from 'react';

const initialState = {
    currentQuestion: 0,
    questionsDone: 0,
    success: false,
    answers: [],
};

const reducer = (state: any, action: any) => {
    ...ya sabes como funciona un switch no?
};

const useSurvey = () => {
    const { query } = useRouter();
    const { name = '&#128075;' } = query;
    const emailRef = useRef<boolean>(false);

    const [state, dispatch] = useReducer(reducer, initialState);

    // Prepotencia here!
    const questions = [
        {
            questionText: '¬ø Que chegou antes o ovo ou a gali√±a ?',
            questionHtml: `<h2>¬ø Que chegou antes o ovo ou a gali√±a ?</h2>`,
            answerOptions: [{ answerText: 'Ovo', isCorrect: true, }, { answerText: 'Gali√±a', isCorrect: false }],
        },
    ];

    useEffect(() => {
        if (state.currentQuestion === questions.length - 1 && !emailRef.current) {
            (async () => {
                try {
                    await fetch('/api/email', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            subject: `Job survey from ${name} - ${new Date().toLocaleString()}`,
                            message: `
                                    <h1> ${name} </h1>
                                    <code> ${navigator.userAgent} </code>
                                    <ol>
                                        ${state.answers.map(
                                            (answer: any) =>
                                                `<li> ${answer.question} : ${answer.answer} - ${
                                                    answer.isCorrect ? '‚úÖ' : 'üö´'
                                                } </li>`
                                        )}
                                    </ol>
                                    `.replace(/,/g, ''),
                        }),
                    });
                    emailRef.current = true;
                } catch (e) {
                    console.log(e);
                }
            })();
        }
    }, [state, name, questions.length]);

    const handlePreviousQuestion = () => {
        if (state.currentQuestion > 1) dispatch({ type: 'PREVIOUS_QUESTION' });
    };

    const handleNextQuestion = () => {
        if (state.currentQuestion != 0 && state.questionsDone >= state.currentQuestion)
            dispatch({ type: 'NEXT_QUESTION' });
    };

    const handleAnswerOptionClick = (payload: {
        question: string;
        answer: string;
        isCorrect: boolean;
        questionNum: number;
    }) => dispatch({ type: 'ADD_ANSWER', payload });

    return {
        questions,
        answers: state.answers,
        surveySuccess: state.success,
        currentQuestionNum: state.currentQuestion,
        questionsDoneNum: state.questionsDone,
        totalQuestions: questions.length,
        handleAnswerOptionClick,
        handleNextQuestion,
        handlePreviousQuestion,
    };
};

export default useSurvey;
```

Meu backend

```ts email.ts v1
import type { NextApiRequest, NextApiResponse } from 'next';
import nodemailer from 'nodemailer';

export default async function handler(req: NextApiRequest, res: NextApiResponse<any>) {
    const transporter = nodemailer.createTransport({
        service: process.env.EMAIL_HOST,
        auth: {
            user: process.env.EMAIL,
            pass: process.env.EMAIL_PASSWORD,
        },
    });

    const { subject, message } = req.body;

    const mailOptions = {
        from: process.env.EMAIL,
        to: process.env.EMAIL,
        subject: subject,
        html: message,
    };

    try {
        await transporter.sendMail(mailOptions);
        res.status(200).json({ success: true });
    } catch (error) {
        res.status(500).json({ success: error });
    }
}
```

## Resultado

<Image src="/survey-success.png" alt="Caso de √©xito" width="544" height="452" />
<Image src="/survey-email.png" alt="Correo coas respostas" width="822" height="491" />

Proba ti mesmo: [Ligaz√≥n ao resultado](https://xabierlameiro.com/survey?name=Lector/a 'Ligaz√≥n √° enquisa')
