# name: Playwright E2E Tests
# on:
#     push:
#         branches: [dev]
#     pull_request:
#         branches: [dev]
#     # schedule:
#     #     # every day 06:30 GMT+8
#     #     - cron: '30 10 * * *'

# jobs:
#     wait-for-deployment:
#         uses: ./.github/workflows/vercel-deployment.yml
#         if: (github.event_name == 'push' || github.event_name == 'pull_request') && (github.actor != 'dependabot[bot]')
#         secrets:
#             VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}

#     playwright-e2e-test-stage:
#         timeout-minutes: 60
#         needs: wait-for-deployment
#         runs-on: ubuntu-latest
#         env:
#             VERCEL_URL: ${{ needs.wait-for-deployment.outputs.vercel-deployment-url }}
#             NEXT_PUBLIC_DOMAIN: ${{ secrets.NEXT_PUBLIC_DOMAIN }}
#         steps:
#             - uses: actions/checkout@v3
#             - uses: actions/setup-node@v3
#               with:
#                   node-version: 18
#             - name: Install dependencies
#               run: |
#                   echo "//npm.pkg.github.com/:_authToken=${{ secrets.NPM_TOKEN }}" >> ~/.npmrc
#                   echo "@xabierlameiro:registry=https://npm.pkg.github.com/" >> ~/.npmrc
#                   yarn install
#               env:
#                   NPM_AUTH_TOKEN: ${{ secrets.NPM_TOKEN }}
#             - name: Install Playwright Browsers
#               run: npx playwright install --with-deps
#             - name: Run Playwright tests
#               run: npx playwright test
#             - uses: actions/upload-artifact@v3
#               if: always()
#               with:
#                   name: playwright-report
#                   path: playwright-report/
#                   retention-days: 30
